# GPXルート表示アプリ Ver1.30

## 概要

この「GPXルート表示アプリ」は、GPX (GPS eXchange Format) ファイルを読み込み、そのルートをOpenStreetMapベースの地図上に表示するWebアプリケーションです。読み込んだGPXファイルに含まれる各データポイントの緯度、経度、標高、および時刻（日本時間）を一覧表形式で地図の横に表示します。

Ver1.30では、ユーザー体験を向上させるためのインタラクティブ機能と表示レイアウトの改善が図られています。

## 機能

*   **GPXファイルの読み込み**: ローカルのGPXファイルを簡単に読み込み、地図にルートを表示します。
*   **地図上でのルート表示**: 読み込んだGPXトラックをLeaflet.jsを使用してOpenStreetMap上に描画し、ルート全体が収まるように自動的にズームレベルと中心位置を調整します。
*   **データポイント一覧表示**: 各GPXデータポイントの時刻（日本時間）、緯度、経度、標高を一覧表で表示します。
    *   **インタラクティブな地図連携**: 一覧表の特定の行をクリックすると、その地点のマーカーが地図上に表示され、地図がその地点を中心に移動します。
    *   **行のハイライト**: クリックされた行は視覚的にハイライトされます。
*   **速度・高度グラフ表示**: 各データポイントにおける時速（km/h）と高度（m）の推移をChart.jsを用いた折れ線グラフで視覚的に表示します。
    *   **インタラクティブなグラフ連携**: 一覧表の特定の行をクリックすると、グラフ上の対応する時刻位置に縦のライン（注釈）が表示され、地点の特定を助けます。
    *   **X軸ラベルの改善**: X軸の時刻ラベルが重ならないよう、自動的に回転・間引き表示されます。
*   **ルートのクリア**: 表示されている地図上のルート、データ一覧、グラフ、および選択マーカーを簡単にクリアできます。
*   **レスポンシブデザイン**: PC、タブレット、スマートフォンなど、様々な画面サイズに対応したレイアウトを提供します。
    *   コントロールパネルはコンパクトな横並びレイアウト。
    *   PC画面では地図、データ一覧、グラフが効率的に配置され、一覧表とグラフの高さ比率は4:6に設定されています。
    *   小画面では要素が縦に並び、タッチデバイスでの操作性を考慮しています。
*   **全体表示の最適化**: アプリ全体がブラウザ画面の95%の幅と高さに収まるように調整されており、中央に表示されます。

## 使い方

1.  **ファイルの準備**: 表示したいGPXファイル（例: `my_route.gpx`）を用意します。
2.  **アプリの起動**: `GPXルート表示アプリ.html` ファイルをウェブブラウザ（Chrome, Firefox, Edgeなど）で開きます。インターネット接続が必要です。
3.  **GPXファイルの読み込み**:
    *   「ファイルを選択」ボタンをクリックします。
    *   用意したGPXファイルを選択し、「開く」をクリックします。
    *   ファイルが正常に読み込まれると、地図上にルートが表示され、右側のパネルにデータポイントの一覧と速度・高度グラフが表示されます。
    *   ステータスメッセージに読み込み状況が表示されます。
4.  **データポイントの確認**:
    *   データ一覧表のいずれかの行をクリックすると、その地点が地図上にマーカーで表示され、グラフ上の対応する時刻に縦ラインが表示されます。
5.  **ルートのクリア**:
    *   地図上のルート、データパネルの情報、グラフ、および地図上のマーカーを消去したい場合は、「ルートクリア」ボタンをクリックします。

## 技術スタック

*   **HTML5**: アプリケーションの構造を定義。
*   **CSS3**: スタイリングとレスポンシブデザインの実現。
*   **JavaScript (ES6+)**: GPXデータの解析、地図操作、UIインタラクション、グラフ表示を処理。
*   **Leaflet.js**: オープンソースのインタラクティブマップライブラリ。地図の表示とGPXルートの描画に使用。
    *   [Leaflet 公式サイト](https://leafletjs.com/)
*   **OpenStreetMap**: 地図タイルとして利用。
    *   [OpenStreetMap 公式サイト](https://www.openstreetmap.org/)
*   **Chart.js**: データ可視化のためのJavaScriptライブラリ。速度・高度グラフの描画に使用。
    *   [Chart.js 公式サイト](https://www.chartjs.org/)
*   **Chart.js Annotations Plugin**: Chart.jsグラフに注釈（縦ラインなど）を追加するために使用。
    *   [Chart.js Annotations Plugin GitHub](https://github.com/chartjs/chartjs-plugin-annotation)

---