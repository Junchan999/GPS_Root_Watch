# GPXルート表示アプリ Ver1.50

## 概要

このアプリケーションは、GPXファイルを読み込み、そのルート情報をインタラクティブな地図、データテーブル、グラフで可視化するためのWebアプリケーションです。サーバーは不要で、`index.html` ファイルをブラウザで開くだけでローカル環境で動作します。

サイクリング、登山、ランニングなどのアクティビティで記録したGPXログを手軽に確認・分析することを目的としています。

## 主な機能

*   **GPXファイルの読み込み**: PCやスマートフォンからGPXファイルを選択して、ルート情報を瞬時に表示します。
*   **地図表示**:
    *   [OpenStreetMap](https://www.openstreetmap.org/) をベースにした地図上にGPXのルートをポリラインで描画します。
    *   読み込み完了後、ルート全体が収まるように地図の表示範囲とズームレベルが自動で調整されます。
*   **データポイント一覧**:
    *   ルート上の各データポイント（時刻、緯度、経度、標高）を表形式で一覧表示します。
    *   時刻は自動的に日本標準時（JST）に変換して表示されます。
*   **速度・高度グラフ**:
    *   ルート全体の高度の推移と、各地点間の時速を折れ線グラフで表示します。
    *   2軸グラフにより、高度と速度の関係性を視覚的に把握できます。
*   **インタラクティブな連携**:
    *   データ一覧の特定の行をクリックすると、地図上の対応する地点にマーカーが表示され、グラフ上にも縦のラインで位置がハイライトされます。
    *   地図上のマーカーをクリックすると、その地点の詳細情報（緯度、経度、高度、時刻）がポップアップで表示されます。
*   **統計情報の表示**:
    *   読み込んだルートの**合計距離 (km)**、**合計時間**、**平均時速 (km/h)** を自動で算出して表示します。
*   **拡大表示機能 (Ver1.50の新機能)**:
    *   「GPXデータポイント」と「速度・高度グラフ」の各パネルに設置された「拡大」ボタンをクリックすることで、それぞれのコンテンツをモーダルウィンドウで大きく表示できます。
    *   詳細なデータを確認したい場合や、グラフ全体をじっくり見たい場合に便利です。
*   **レスポンシブデザイン**:
    *   PCのワイド画面からスマートフォンの縦画面まで、さまざまなデバイスサイズに対応しています。画面幅に応じてレイアウトが自動で最適化されます。
*   **データクリア機能**:
    *   「ルートクリア」ボタンで、現在表示しているすべての情報をリセットし、新しいファイルを読み込む準備ができます。

## 使い方

1.  **ファイルを開く**:
    *   ダウンロードした `index.html` ファイルを、お使いのウェブブラウザ（Google Chrome, Firefox, Safari, Edgeなど）で開きます。
2.  **GPXファイルの選択**:
    *   画面上部にある「ファイルを選択」ボタンをクリックし、表示したいGPXファイル（`.gpx`）を選びます。
3.  **データの確認**:
    *   ファイルの読み込みが完了すると、自動的に地図上にルートが描画され、右側のパネルにデータポイント一覧とグラフが表示されます。
    *   画面上部のステータスメッセージで、合計距離などの統計情報を確認できます。
4.  **詳細の表示**:
    *   データポイント一覧のいずれかの行をクリックすると、地図とグラフ上でその地点がハイライトされます。
5.  **表示の拡大**:
    *   データ一覧やグラフを大きく見たい場合は、各パネルの右上にある「拡大」ボタンをクリックしてください。モーダルウィンドウが開き、コンテンツが拡大表示されます。ウィンドウ外または閉じるボタン（×）で元の画面に戻ります。
6.  **データのクリア**:
    *   別のデータを見たい場合は、「ルートクリア」ボタンをクリックして現在の表示をリセットしてください。

## Ver1.40からの主な変更点 (Ver1.50)

*   **データパネル・グラフパネルの拡大表示機能を追加**
    *   各パネルのヘッダーに「拡大」ボタンを設置しました。
    *   ボタンをクリックするとモーダルウィンドウが開き、データテーブルまたはグラフを画面全体に広げて詳細に確認できるようになりました。
    *   特にデータポイント数が多い場合や、グラフの細かい変動を見たい場合に有効です。

## 技術仕様

*   **言語**: HTML5, CSS3, JavaScript (ES6)
*   **外部ライブラリ**:
    *   **Leaflet.js (v1.9.4)**: インタラクティブな地図表示
    *   **Chart.js (v3.x)**: グラフ描画
    *   **chartjs-plugin-annotation (v1.4.0)**: グラフ上の縦線ハイライト表示

## 動作環境

*   最新版の主要ウェブブラウザでの動作を推奨します。
    *   Google Chrome
    *   Mozilla Firefox
    *   Apple Safari
    *   Microsoft Edge
*   インターネット接続は、初回読み込み時の地図タイルやライブラリの取得に必要です。一度読み込まれれば、オフラインでもある程度動作します。

## 注意事項

*   本アプリケーションはクライアントサイド（ブラウザ上）のみで動作します。選択したGPXファイルが外部サーバーにアップロードされることはありません。
*   数万点を超える非常に大きなGPXファイルを読み込むと、データの処理に時間がかかり、ブラウザの動作が遅くなる可能性があります。

---