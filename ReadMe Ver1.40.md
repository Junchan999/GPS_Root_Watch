# GPXルート表示アプリ Ver1.40

## 概要
このWebアプリケーションは、GPX（GPS Exchange Format）形式のルートファイルを読み込み、そのルートをインタラクティブな地図上に表示します。ルート上の各データポイントの詳細情報（時刻、緯度、経度、標高）を一覧表示するほか、速度と高度の推移をグラフで視覚的に確認できます。Ver1.40では、読み込んだルート全体の総移動距離、総所要時間、および平均時速を自動で計算し、表示する機能が追加されました。

## 機能
1.  **GPXファイルの読み込みと地図表示**:
    *   GPXファイルをアップロードすると、Leaflet.jsを利用してOpenStreetMap上にルート（ポリライン）が表示されます。
    *   ルートが地図の表示範囲に自動的にズームされます。

2.  **GPXデータポイント一覧**:
    *   読み込んだGPXファイルに含まれる各データポイントの時刻（日本標準時）、緯度、経度、標高を詳細なテーブル形式で表示します。
    *   テーブルは内容に応じて縦スクロール可能です。

3.  **速度・高度グラフ表示**:
    *   Chart.jsを使用して、ルートの通過時間に対する速度と高度の推移を線グラフで表示します。
    *   Y軸は速度（km/h）と高度（m）で分かれ、視覚的に分かりやすい表示になっています。

4.  **特定ポイントのハイライト**:
    *   テーブルの任意の行をクリックすると、その地点が地図上にマーカーとして表示され、ポップアップで詳細情報が表示されます。
    *   同時に、グラフ上にもクリックした地点を示す垂直線が表示され、地図・テーブル・グラフ間で連携してデータポイントを特定できます。

5.  **ルートの統計情報表示 (Ver1.40で追加)**:
    *   読み込んだGPXルート全体の**総移動距離** (km) を表示します。
    *   ルートの開始から終了までの**総所要時間** (HH:MM:SS) を表示します。
    *   ルート全体の**平均時速** (km/h) を表示します。

6.  **ルートクリア機能**:
    *   「ルートクリア」ボタンをクリックすると、現在表示されている地図上のルート、テーブルデータ、グラフ、および統計情報がすべてクリアされ、初期状態に戻ります。

## 使い方
1.  `index.html`ファイルをWebブラウザで開きます。
2.  画面上部の「ファイルを選択」ボタンをクリックし、`*.gpx`形式のファイルを選択します。
3.  ファイルが正常に読み込まれると、以下の情報が自動的に表示されます。
    *   地図上にルートの軌跡。
    *   右側のデータパネルにGPXデータポイントの一覧表。
    *   右下のグラフパネルに速度と高度のグラフ。
    *   コントロールパネルの下に総距離、所要時間、平均時速の統計情報。
4.  データポイント一覧のテーブル行をクリックすると、その地点が地図上でマーカー表示され、グラフ上で強調表示されます。
5.  新しいGPXファイルを読み込むか、表示をリセットしたい場合は、「ルートクリア」ボタンをクリックします。

## 技術スタック
*   **HTML5**: アプリケーションの構造を定義。
*   **CSS3**: レスポンシブデザインとスタイリング。
*   **JavaScript**: アプリケーションのロジックとインタラクティブ機能。
*   **Leaflet.js**: オープンソースのインタラクティブマップライブラリ。
*   **Chart.js**: オープンソースのJavaScriptグラフライブラリ。
*   **Chart.js Annotations Plugin**: Chart.jsのグラフに注釈（選択地点のラインなど）を追加するためのプラグイン。

## 変更履歴
*   **Ver1.40 (2025/10/15)**:
    *   ルートの総移動距離、総所要時間、平均時速を表示する機能を追加。
    *   統計情報表示のための新しいUI要素をコントロールパネルに追加。
    *   モバイル表示時の統計情報表示のレイアウトを調整。
    *   GPXデータ処理ロジックを更新し、統計情報を計算するように変更。

## ライセンス
このプロジェクトはMITライセンスの下で公開されています。詳細については、プロジェクト内に含まれる`LICENSE`ファイルを参照してください（もしあれば）。
